<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* your existing profile CSS */
    </style>
</head>
<body>
<script src="config.js"></script>

<div class="floating-shape shape1"></div>
<div class="floating-shape shape2"></div>
<div class="floating-shape shape3"></div>

<div class="alerts-container fade-in">
    <div class="profile-card slide-up">
        <h3 id="welcomeHeader">Loading Profile...</h3>
        <div class="profile-detail"><strong>Username:</strong> <span id="profileUsername"></span></div>
        <div class="profile-detail"><strong>User ID:</strong> <span id="profileId"></span></div>
        <div class="profile-detail"><strong>Role:</strong> <span id="profileRole"></span></div>
        <div class="profile-detail"><strong>Status:</strong> <span id="profileActive"></span></div>
        <button class="btn" id="logoutBtn">Log Out</button>
        <a href="index.html" class="btn" style="background: #00f7ff; color: #000; margin-top: 30px; float: left;">‚Üê Dashboard</a>
    </div>
</div>

<script>
    document.getElementById('logoutBtn').addEventListener('click', () => {
        localStorage.removeItem('access_token');
        window.location.href = 'login.html';
    });

    fetch(`${API_BASE_URL}/profile`, { headers: { 'Authorization': `Bearer ${token}` } })
    .then(r => { if (r.status === 401) throw new Error('Unauthorized'); return r.json(); })
    .then(user => {
        document.getElementById('welcomeHeader').textContent = `Welcome, ${user.username}!`;
        document.getElementById('profileUsername').textContent = user.username;
        document.getElementById('profileId').textContent = user.id;
        document.getElementById('profileRole').textContent = user.role;
        const statusElement = document.getElementById('profileActive');
        statusElement.textContent = user.is_active ? "Active" : "Inactive";
        statusElement.style.color = user.is_active ? '#00f7ff' : '#f44336';
    })
    .catch(e => {
        if (e.message === 'Unauthorized') {
            alert('Session expired. Please log in again.');
            localStorage.removeItem('access_token');
            window.location.href = 'login.html';
        } else console.error(e);
    });
</script>
</body>
</html>
